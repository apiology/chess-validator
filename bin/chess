#!/usr/bin/env ruby

require 'chess-validator'

if ARGV.size != 1
  puts "USAGE: chess [input board file] < [moves file]"
  exit false
end

board = ChessValidator::Board.new(IO.read(ARGV[0]))
evaluator = ChessValidator::MoveEvaluator.new(board)
while line = $stdin.gets do
  move = line.split(' ')
  from = ChessValidator::Position.new(move[0])
  to = ChessValidator::Position.new(move[1])
  puts evaluator.evaluate(from, to) ? 'LEGAL' : 'ILLEGAL'
end
